@page "{id:long?}"
@model VDC.Integration.Front.Pages.Admin.TenantModel
@{
    ViewData["Title"] = "Tenant";
}

<div ng-controller="tenantController" ng-init="init(@Model.ID)" class="ng-cloak">

    <div class="container login-container">
        <div class="row">
            <div class="col-md-6 login-form-1">
                <h3>E-commerce</h3>
                <div class="form-group form-ecommerce">
                    <select class="custom-select" ng-change="setTypeEcommerce(tenant.integrationType)" ng-model="tenant.integrationType" required>
                        <option value="">--Selecione--</option>
                        <option value="Shopify">Shopify</option>
                    </select>
                </div>
            </div>
            <div class="col-md-6 login-form-2">
                <div class="login-logo">
                    <i class="fas fa-inverse fa-link fa-3x"></i>

                </div>
                <h3>ERP</h3>
                <div class="form-group form-erp">
                    <select class="custom-select" ng-change="setTypeErp(tenant.type)" ng-model="tenant.type" required>
                        <option value="">--Selecione--</option>
                        <option value="Millennium">Millennium</option>
                        <option value="Omie">Omie</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <div class="container login-container">
        <div class="row">
            <div class="col-sm-10">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <a class="nav-link active" id="home-tab" data-toggle="tab" href="#ecommerce" ng-click="showDiv('ecommerce')" role="tab" aria-controls="ecommerce" aria-selected="true">{{tenant.integrationType || "E-commerce"}}</a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="profile-tab" data-toggle="tab" href="#erp-type" ng-click="showDiv('erp')" role="tab" aria-controls="erp" aria-selected="false">{{tenant.type || "ERP" }}</a>
                    </li>
                    <li class="nav-item" role="presentation" ng-if="editMode">
                        <a class="nav-link" id="tools-tab" data-toggle="tab" href="#tools" ng-click="showDiv('tools')" role="tab" aria-controls="tools" aria-selected="false">Ferramentas</a>
                    </li>
                </ul>
            </div>
            <div class="col-sm-2">
                <div class="d-flex justify-content-end" formaction="submit">
                    <button id="submit" name="submit" ng-click="save()" style="margin-right: 5px;" class="btn btn-primary" value="1" ng-disabled="isSending || readOnly">
                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" ng-show="isSending"></span>
                        Salvar
                    </button>
                    <a asp-page="Dashboard" id="cancel" name="cancel" class="btn btn-secondary">Cancelar</a>
                </div>
            </div>
        </div>
        <div>
            <div class="card">
                <div class="card-header" style="padding: 0.5rem 0.5rem 0.2rem 0.5rem;">
                    <h6>PARAMETROS</h6>
                </div>
                <fieldset class="card-body" ng-disabled="readOnly">
                    <div class="tab-content" id="myTabContent">
                        <form name="tenantForm" novalidate>
                            <div class="tab-pane fade show active" id="ecommerce" aria-labelledby="home-tab">
                                <div ng-show="show.ecommerce">
                                    <!--Shopify-->
                                    <div class="panel-body" ng-if="typeEcommerce.IsShopify">
                                        <div class="form-group">
                                            <label for="storeName">Nome da Loja</label>
                                            <input type="text" name="storeName" class="form-control" ng-model="tenant.storeName" required />
                                        </div>
                                        <div class="form-group" ng-show="editMode">
                                            <label for="storeName">Handle da Loja</label>
                                            <input type="text" name="storeName" class="form-control" ng-value="tenant.storeHandle" disabled="disabled" />
                                            <small class="form-text text-muted">
                                                nome para identificar as filas de integração da loja. gerado automaticamente e não pode ser alterado.
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <label for="storeName">Url da Api da Loja</label>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">https://</</span>
                                                </div>
                                                <input type="text" name="shopifyStoreDomain" class="form-control" ng-model="tenant.shopifyData.shopifyStoreDomain" required />
                                                <div class="input-group-append">
                                                    <span class="input-group-text">.myshopify.com</</span>
                                                </div>
                                            </div>
                                            <small class="form-text text-muted">
                                                nome da loja da maneira como aparece na url padrão do shopify. usada para setar a url da api.
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <label for="daysToDelivery">Dias para entrega</label>
                                            <input type="number" name="daysToDelivery" class="form-control" ng-model="tenant.shopifyData.daysToDelivery" required step="1" min="0" max="999999999" />
                                        </div>
                                        <div class="form-group">
                                            <label for="minOrderId">Id Shopify inicial de pedido a partir do qual integrar</label>
                                            <input type="number" name="minOrderId" class="form-control" ng-model="tenant.shopifyData.minOrderId" required step="1" min="0" max="9223372036854775807" />
                                        </div>
                                        <div class="form-check">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="status" ng-model="tenant.status">
                                                <label class="form-check-label" for="status">
                                                    Habilitar Integração
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="productIntegrationStatus" ng-model="tenant.productIntegrationStatus">
                                                <label class="form-check-label" for="productIntegrationStatus">
                                                    Habilitar Integração de Produtos
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="productIntegrationPrice" ng-model="tenant.milleniumData.productIntegrationPrice">
                                                <label class="form-check-label" for="productIntegrationPrice">
                                                    Habilitar Integração de Preço
                                                </label>
                                                <small class="form-text text-muted">
                                                    Opção válida para ERP Millennium.
                                                </small>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="orderIntegrationStatus" ng-model="tenant.orderIntegrationStatus">
                                                <label class="form-check-label" for="orderIntegrationStatus">
                                                    Habilitar Integração de Pedidos
                                                </label>


                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="disableCustomerDocument" ng-model="tenant.shopifyData.disableCustomerDocument">
                                                    <label class="form-check-label" for="disableCustomerDocument">
                                                        Desabilitar o envio de CPF/CNPJ
                                                    </label>
                                                </div>

                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="disableAddressParse" ng-model="tenant.shopifyData.disableAddressParse">
                                                    <label class="form-check-label" for="disableAddressParse">
                                                        Desabilitar a separação do endereço em Número e Bairro
                                                    </label>
                                                </div>

                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="parsePhoneDDD" ng-model="tenant.shopifyData.parsePhoneDDD">
                                                    <label class="form-check-label" for="parsePhoneDDD">
                                                        Separar telefones em DDD e Fone
                                                    </label>
                                                </div>

                                            </div>

                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="hasProductKit" ng-model="tenant.shopifyData.hasProductKit">
                                                <label class="form-check-label" for="hasProductKit">
                                                    Habilitar integração de produtos KIT
                                                </label>
                                                <small class="form-text text-muted">
                                                    Marque esta opção se houver produtos <b>KIT</b>. O produto kit possui as tag <b>KITSKU:sku|qtdeEstoque</b> e <b>KIT:SIM</b>.<br />
                                                </small>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="enableStockProductKit" ng-model="tenant.shopifyData.enableStockProductKit">
                                                <label class="form-check-label" for="enableStockProductKit">
                                                    Habilitar controle de estoque de produtos KIT
                                                </label>
                                                <small class="form-text text-muted">
                                                    Caso utilize apps de terceiros para controlar e gerenciar produtos kit, desmarque está opção!
                                                </small>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="setProductsAsUnpublished" ng-model="tenant.shopifyData.setProductsAsUnpublished">
                                                <label class="form-check-label" for="setProductsAsUnpublished">
                                                    Integrar todos os produtos como inativos (não publicados no front)
                                                </label>
                                            </div>

                                            <div class="form-group">
                                                <label for="type">Tipo de Integração de Decrição</label>
                                                <select name="type" class="custom-select" ng-model="tenant.shopifyData.bodyIntegrationType" required>
                                                    <option value="">--Selecione--</option>
                                                    <option value="Always">Sempre enviar</option>
                                                    <option value="Creation">Somente enviar na criação</option>
                                                    <option value="Never">Nunca enviar</option>
                                                </select>
                                            </div>

                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="productDescriptionIsHTML" ng-model="tenant.shopifyData.productDescriptionIsHTML">
                                                <label class="form-check-label" for="productDescriptionIsHTML">
                                                    Descrição do Produto no ERP é HTML (não precisa transformar \n em &lt;br&gt;)
                                                </label>
                                            </div>

                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="productGroupingEnabled" ng-model="tenant.shopifyData.productGroupingEnabled">
                                                <label class="form-check-label" for="productGroupingEnabled">
                                                    Habilitar agrupamento de produtos
                                                </label>
                                            </div>

                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="writeCategoryNameTags" ng-model="tenant.shopifyData.writeCategoryNameTags">
                                                <label class="form-check-label" for="writeCategoryNameTags">
                                                    Criar tags no produto com o nome das categorias
                                                </label>
                                            </div>

                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="imageIntegrationEnabled" ng-model="tenant.shopifyData.imageIntegrationEnabled">
                                                <label class="form-check-label" for="imageIntegrationEnabled">
                                                    Habilitar Integração de imagens de produtos
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="blockFulfillmentNotificationPerShipmentService" ng-model="tenant.shopifyData.blockFulfillmentNotificationPerShipmentService">
                                                <label class="form-check-label" for="blockFulfillmentNotificationPerShipmentService">
                                                    Bloquear notificações fulfillment por serviço de entrega
                                                </label>

                                                <div class="form-group" ng-show="tenant.shopifyData.blockFulfillmentNotificationPerShipmentService">
                                                    <label for="ShipmentServicesForFulfillmentNotification">Nome dos serviços de entrega (separados por ponto e vírgula ( ; ), se nenhum serviço for informado todas notificações, independente do serviço, serão bloqueadas).</label>
                                                    <input type="text" name="ShipmentServicesForFulfillmentNotification" class="form-control" ng-model="tenant.shopifyData.shipmentServicesForFulfillmentNotification" />
                                                </div>
                                            </div>
                                            <div>
                                                <label class="form-check-label" for="delayProcessOfShopifyUpdateOrderMessages">
                                                    Tempo de esperar para processar mensagens da shopify de atualização do pedido (em segundos)
                                                </label>

                                                <input type="number" name="delayProcessOfShopifyUpdateOrderMessages" class="form-control" ng-model="tenant.shopifyData.delayProcessOfShopifyUpdateOrderMessages" />
                                            </div>
                                            <div class="form-check form-group">
                                                <input class="form-check-input" type="checkbox" id="shopifydata_enableSaveIntegrationInformations" ng-model="tenant.shopifyData.enableSaveIntegrationInformations">
                                                <label class="form-check-label" for="shopifydata_enableSaveIntegrationInformations">
                                                    Salvar na base de dados as informações de integração.
                                                </label>
                                            </div>
                                            <div class="form-check form-group">
                                                <input class="form-check-input" type="checkbox" id="shopifydata_enableScheduledNextHour" ng-model="tenant.shopifyData.enableScheduledNextHour">
                                                <label class="form-check-label" for="shopifydata_enableScheduledNextHour">
                                                    Habilitar integração de pedidos de hora em hora.
                                                </label>
                                            </div>
                                            <div class="form-check form-group">
                                                <input class="form-check-input" type="checkbox" id="shopifydata_notConsiderProductIfPriceIsZero" ng-model="tenant.shopifyData.notConsiderProductIfPriceIsZero">
                                                <label class="form-check-label" for="shopifydata_notConsiderProductIfPriceIsZero">
                                                    Desconsiderar produto se preço de/para for zero.
                                                </label>
                                            </div>
                                            <div class="form-check form-group">
                                                <input class="form-check-input" type="checkbox" id="shopifydata_disableUpdateProduct" ng-model="tenant.shopifyData.disableUpdateProduct">
                                                <label class="form-check-label" for="shopifydata_disableUpdateProduct">
                                                    Desabilitar atualização de produtos.
                                                </label>
                                                <small class="form-text text-muted">
                                                    Essa opção não desabilita atualização do titulo.
                                                </small>
                                            </div>

                                            <div class="form-check form-group">
                                                <input class="form-check-input" type="checkbox" id="shopifydata_enableAuxiliaryCountry" ng-model="tenant.shopifyData.enableAuxiliaryCountry">
                                                <label class="form-check-label" for="shopifydata_enableAuxiliaryCountry">
                                                    Habilitar envio de país auxiliar
                                                </label>
                                                <small class="form-text text-muted">
                                                    Caso país diferente de Brasil, sera enviado 'EX' para o ERP
                                                </small>
                                            </div>

                                            <div class="form-check form-group">
                                                <input class="form-check-input" type="checkbox" id="shopify_EnableMaxVariants" ng-model="tenant.shopifyData.enableMaxVariantsQueryGraphQL" ng-click="setEnableMaxVariants()">
                                                <label class="form-check-label" for="shopify_EnableMaxVariants">
                                                    Habilitar limite máximo de variantes em consuta GraphQL
                                                </label>
                                                <small class="form-text text-muted">
                                                    Valor padrão: 25 | Recomendado em caso de estouro de limite(Throttled) : 8
                                                </small>
                                            </div>

                                            <div class="form-group" id="divEnableMaxVariants" ng-show="tenant.shopifyData.enableMaxVariantsQueryGraphQL">
                                                <label for="nameSkuField">Quantidade de variantes por consulta</label>
                                                <input type="text" name="shopify_" class="form-control" ng-required="tenant.shopifyData.enableMaxVariantsQueryGraphQL" ng-model="tenant.shopifyData.maxVariantsQueryGraphQL" />
                                            </div>
                                        </div>
                                        <br />
                                        <div class="panel panel-default" ng-if="!readOnly">
                                            <div class="panel-heading">
                                                <h3 class="panel-title">Shopify Apps</h3>
                                            </div>
                                            <div class="panel-body">
                                                <div class="table-responsive-md form-group">
                                                    <table class="table table-bordered">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col">Key</th>
                                                                <th scope="col">Password</th>
                                                                <th scope="col">Segredo</th>
                                                                <th scope="col" ng-show="tenant.shopifyData.shopifyApps.length > 1">Ações</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="app in tenant.shopifyData.shopifyApps">
                                                                <th scope="row">
                                                                    <input data-toggle="tooltip" data-placement="top" title="Key Shopify" type="text" name="shopifyKey{{$index}}" class="form-control" ng-model="app.shopifyKey" required>
                                                                </th>
                                                                <td>
                                                                    <input data-toggle="tooltip" data-placement="top" title="Senha Shopify" type="text" name="shopifyPassword{{$index}}" class="form-control" ng-model="app.shopifyPassword" required>
                                                                </td>
                                                                <td>
                                                                    <input data-toggle="tooltip" data-placement="top" title="Secret Key Shopify" type="text" name="shopifySecret{{$index}}" class="form-control" ng-model="app.shopifySecret" required>
                                                                </td>
                                                                <td ng-show="tenant.shopifyData.shopifyApps.length > 1">
                                                                    <button type="button" class="btn btn-outline-danger" ng-click="removeShopifyApp(app)">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                                                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path>
                                                                            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path>
                                                                        </svg>
                                                                    </button>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <div>
                                                        <button type="button" class="btn btn-success" ng-click="addShopifyApp()" ng-disabled="readOnly">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
                                                                <path d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z"></path>
                                                            </svg>
                                                            Adicionar
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="erp-type" role="tabpanel" aria-labelledby="erp-type-tab">
                                <div ng-if="show.erp">
                                    <!--Millenium-->
                                    <div class="panel-body" ng-if="typeErp.IsMillennium">
                                        <div class="form-group">
                                            <label for="millenium_url">Url da Api da Loja</label>
                                            <input type="text" name="millenium_url" class="form-control" ng-model="tenant.milleniumData.url" required />
                                            <small class="form-text text-muted">
                                                url completa da api millennium da loja, incluindo porta. ex: <b>http://179.124.193.98:6017</b>
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <label for="millenium_vitrineId">Id da Vitrine da Loja</label>
                                            <input type="number" name="millenium_vitrineId" class="form-control" ng-model="tenant.milleniumData.vitrineId" required step="1" min="0" max="999999999999999" />
                                        </div>

                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="millenium_splitEnabled" ng-model="tenant.milleniumData.splitEnabled">
                                            <label class="form-check-label" for="millenium_splitEnabled">
                                                Habilitar integração com a funcionalidade de Split de Produtos da Millennium
                                            </label>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="millenium_enabledStockMto" ng-model="tenant.milleniumData.enabledStockMto">
                                            <label class="form-check-label" for="millenium_enabledStockMto">
                                                Habilitar integração de estoque MTO <b>Make To Order</b>
                                            </label>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="millenium_controlProductByUpdateDate" ng-model="tenant.milleniumData.controlProductByUpdateDate">
                                            <label class="form-check-label" for="millenium_ControlProductByUpdateDate">
                                                Habilitar controle de produto pela data de atualização ao invês de pelo transId
                                            </label>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="millenium_controlStockByUpdateDate" ng-model="tenant.milleniumData.controlStockByUpdateDate">
                                            <label class="form-check-label" for="millenium_ControlStockByUpdateDate">
                                                Habilitar controle de estoque pela data de atualização ao invês de pelo transId
                                            </label>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="millenium_controlPriceByUpdateDate" ng-model="tenant.milleniumData.controlPriceByUpdateDate">
                                            <label class="form-check-label" for="millenium_ControlPriceByUpdateDate">
                                                Habilitar controle de preço pela data de atualização ao invês de pelo transId
                                            </label>
                                        </div>
                                        <div class="form-group">
                                            <label for="millenium_corDescription">Número de itens por consulta na API</label>
                                            <input type="number" name="millenium_numberOfItensPerAPIQuery" class="form-control" ng-model="tenant.milleniumData.numberOfItensPerAPIQuery" />
                                            <small class="form-text text-muted">
                                                Se preenchido com 0 será considerado o valor padrão de consulta (25)
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <label for="millenium_orderPrefix">Prefixo do Pedido</label>
                                            <input type="text" name="millenium_orderPrefix" class="form-control" maxlength="2" ng-model="tenant.milleniumData.orderPrefix" />
                                            <small class="form-text text-muted">
                                                prefixo adicionado ao número do pedido ao enviar à millennium. ex: <b>SP</b>
                                            </small>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="millenium_saleWithoutStockEnabled" ng-model="tenant.milleniumData.saleWithoutStockEnabled">
                                            <label class="form-check-label" for="millenium_saleWithoutStockEnabled">
                                                Habilitar integração com a funcionalidade de venda sem estoque
                                            </label>
                                        </div>
                                        <div class="form-group">
                                            <label for="millenium_corDescription">Nome da variação Cor</label>
                                            <input type="text" name="millenium_corDescription" class="form-control" ng-model="tenant.milleniumData.corDescription" />
                                            <small class="form-text text-muted">
                                                nome para ser enviado ao Shopify quando usar a variação cor, para casos em que a loja customiza. se não preenchido o padrão será <b>"Cor"</b>
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <label for="corField">Campo Cor</label>
                                            <select name="corField" class="custom-select" ng-model="tenant.milleniumData.corField">
                                                <option value="">--Padrão (desc_cor)--</option>
                                                <option value="cor">cor</option>
                                                <option value="observacao_cor">observacao_cor</option>
                                                <option value="obs_sku1">obs_sku1</option>
                                                <option value="obs_sku2">obs_sku2</option>
                                                <option value="obs_sku3">obs_sku3</option>
                                                <option value="obs_sku4">obs_sku4</option>
                                                <option value="obs_sku5">obs_sku5</option>
                                            </select>
                                            <small class="form-text text-muted">
                                                qual campo deverá ser usado da millennium para enviar a cor da SKU na Shopify
                                            </small>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="sendDefaultCor" ng-model="tenant.milleniumData.sendDefaultCor">
                                            <label class="form-check-label" for="sendDefaultCor">
                                                Enviar na Integração a Cor Padrão (UNICA)
                                            </label>
                                        </div>
                                        <div class="form-group">
                                            <label for="millenium_tamanhoDescription">Nome da variação Tamanho</label>
                                            <input type="text" name="millenium_tamanhoDescription" class="form-control" ng-model="tenant.milleniumData.tamanhoDescription" />
                                            <small class="form-text text-muted">
                                                nome para ser enviado ao Shopify quando usar a variação tamanho, para casos em que a loja customiza. se não preenchido o padrão será <b>"Tamanho"</b>
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <label for="tamanhoField">Campo Tamanho</label>
                                            <select name="tamanhoField" class="custom-select" ng-model="tenant.milleniumData.tamanhoField">
                                                <option value="">--Padrão (desc_tamanho)--</option>
                                                <option value="tamanho">tamanho</option>
                                                <option value="obs_sku1">obs_sku1</option>
                                                <option value="obs_sku2">obs_sku2</option>
                                                <option value="obs_sku3">obs_sku3</option>
                                                <option value="obs_sku4">obs_sku4</option>
                                                <option value="obs_sku5">obs_sku5</option>
                                            </select>
                                            <small class="form-text text-muted">
                                                qual campo deverá ser usado da millennium para enviar o tamanho da SKU na Shopify
                                            </small>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="sendDefaultTamanho" ng-model="tenant.milleniumData.sendDefaultTamanho">
                                            <label class="form-check-label" for="sendDefaultTamanho">
                                                Enviar na Integração o Tamanho Padrão (U)
                                            </label>
                                        </div>
                                        <div class="form-group">
                                            <label for="millenium_estampaDescription">Nome da variação Estampa</label>
                                            <input type="text" name="millenium_estampaDescription" class="form-control" ng-model="tenant.milleniumData.estampaDescription" />
                                            <small class="form-text text-muted">
                                                nome para ser enviado ao Shopify quando usar a variação estampa, para casos em que a loja customiza. se não preenchido o padrão será <b>"Estampa"</b>
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <label for="estampaField">Campo Estampa</label>
                                            <select name="estampaField" class="custom-select" ng-model="tenant.milleniumData.estampaField">
                                                <option value="">--Padrão (desc_estampa)--</option>
                                                <option value="estampa">estampa</option>
                                                <option value="obs_sku1">obs_sku1</option>
                                                <option value="obs_sku2">obs_sku2</option>
                                                <option value="obs_sku3">obs_sku3</option>
                                                <option value="obs_sku4">obs_sku4</option>
                                                <option value="obs_sku5">obs_sku5</option>
                                            </select>
                                            <small class="form-text text-muted">
                                                qual campo deverá ser usado da millennium para enviar a estampa da SKU na Shopify
                                            </small>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="sendDefaultEstampa" ng-model="tenant.milleniumData.sendDefaultEstampa">
                                            <label class="form-check-label" for="sendDefaultEstampa">
                                                Enviar na Integração a Estampa Padrão (UNICA)
                                            </label>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="millenium_capitalizeProductName" ng-model="tenant.milleniumData.capitalizeProductName">
                                            <label class="form-check-label" for="millenium_capitalizeProductName">
                                                Habilitar normalização de nome de produto
                                            </label>
                                            <small class="form-text text-muted">
                                                Ex: PRODUTO TESTE -> Produto Teste
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <label for="millenium_excludedProductCharacters">BlockList de nomes que devem ser ignorados na descrição de produtos</label>
                                            <tags-input min-length="1" name="millenium_excludedProductCharacters" ng-model="tenant.milleniumData.excludedProductCharacters" replace-spaces-with-dashes="false"></tags-input>
                                            <small class="form-text text-muted">
                                                Ignora caracteres contidos no nome do produto que estajam na lista de bloqueio. Ex: Produto Com Vermelho -> Produto Vermelho
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <label for="descriptionField">Campo Nome</label>
                                            <select name="nameField" class="custom-select" ng-model="tenant.milleniumData.nameField" required>
                                                <option value="">--Selecione--</option>
                                                <option value="nome_produto_site">nome_produto_site</option>
                                                <option value="descricao_literal">descricao_literal</option>
                                                <option value="descricao1">descricao1</option>
                                                <option value="descricao_traduzida">descricao_traduzida</option>
                                                <option value="descricao_etiq">descricao_etiq</option>
                                                <option value="obs">obs</option>
                                                <option value="descricao_produto_site">descricao_produto_site</option>
                                                <option value="descricao_sf">descricao_sf</option>
                                            </select>
                                            <small class="form-text text-muted">
                                                qual campo deverá ser usado da millennium para enviar o Título do produto na Shopify
                                            </small>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="objNameSkuEnabled" ng-model="tenant.milleniumData.nameSkuEnabled" ng-click="setNameSkuEnabled()">
                                            <label class="form-check-label" for="objNameSkuEnabled">
                                                Habilitar campo nome SKU
                                            </label>
                                        </div>
                                        <div class="form-group" id="divNomeSKU" ng-show="tenant.milleniumData.nameSkuEnabled">
                                            <label for="nameSkuField">Campo Nome - SKU</label>
                                            <select name="nameSkuField" class="custom-select" ng-model="tenant.milleniumData.nameSkuField">
                                                <option value="">--Selecione--</option>
                                                <option value="desc_cor">desc_cor</option>
                                            </select>
                                            <small class="form-text text-muted">
                                                qual campo do SKU deverá ser usado da millennium para compor o Título do produto na Shopify
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <label>Campo Sku</label>
                                            <select class="custom-select" ng-model="tenant.milleniumData.skuFieldType">
                                                <option value="sku" selected>--Padrão (sku)--</option>
                                                <option value="cod_produto">cod_produto</option>
                                            </select>
                                            <small class="form-text text-muted">
                                                Indica o campo que será utilizado como <b>sku</b> na shopify
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <label for="descriptionField">Campo Descrição</label>
                                            <select name="descriptionField" class="custom-select" ng-model="tenant.milleniumData.descriptionField" required>
                                                <option value="">--Selecione--</option>
                                                <option value="em_branco">--Não integrar descrição--</option>
                                                <option value="descricao_literal">descricao_literal</option>
                                                <option value="descricao1">descricao1</option>
                                                <option value="descricao_traduzida">descricao_traduzida</option>
                                                <option value="descricao_etiq">descricao_etiq</option>
                                                <option value="obs">obs</option>
                                                <option value="descricao_produto_site">descricao_produto_site</option>
                                            </select>
                                            <small class="form-text text-muted">
                                                qual campo deverá ser usado da millennium para enviar a descrição completa do produto na Shopify
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <label for="operatorType">Operadora de pagamento</label>
                                            <select name="operatorType" class="custom-select" ng-model="tenant.milleniumData.operatorType" required>
                                                <option value="">--Selecione--</option>
                                                <option value="CIELO">CIELO</option>
                                                <option value="REDE">REDE</option>
                                                <option value="GETNET">GETNET</option>
                                                <option value="OUTROS">OUTROS</option>
                                                <option value="RED CARD">RED CARD</option>
                                            </select>
                                        </div>
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <h3 class="panel-title">Campos Metafield Extras</h3>
                                            </div>
                                            <div class="panel-body">
                                                <div class="form-group row" ng-repeat="configuration in tenant.milleniumData.extraFieldConfigurations">
                                                    <label for="millenium_extraFieldKey{{$index}}" class="col-sm-1">Key</label>
                                                    <div class="col-sm-4">
                                                        <input type="text" name="millenium_extraFieldKey{{$index}}" class="form-control" ng-model="configuration.key" required>
                                                    </div>
                                                    <label for="millenium_extraFieldJSPath{{$index}}" class="col-sm-1">JSPath</label>
                                                    <div class="col-sm-4">
                                                        <input type="text" name="millenium_extraFieldJSPath{{$index}}" class="form-control" ng-model="configuration.jsPath" required />
                                                    </div>
                                                    <div class="col-sm-1">
                                                        <button type="button" ng-click="removeMillenniumExtraFieldConfiguration(configuration)">Remover</button>
                                                    </div>r
                                                </div>
                                                <div class="col-sm-10">
                                                    <button type="button" ng-click="addMillenniumExtraFieldConfiguration()">Adicionar</button>
                                                </div>
                                                <small class="form-text text-muted">
                                                    JSPath: <a href="https://jsonpath.com" target="_blank">sintaxe e validador</a>
                                                </small>
                                            </div>
                                        </div>
                                        <br />
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <h3 class="panel-title">Mapeamento de métodos de pagamento Shopify/Millennium</h3>
                                            </div>
                                            <div class="panel-body">
                                                <div class="table-responsive-md form-group">
                                                    <table class="table table-bordered">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col">Shopify</th>
                                                                <th scope="col">Millennium</th>
                                                                <th scope="col" ng-show="tenant.methodPayments.length >= 1">Ações</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="app in tenant.methodPayments">
                                                                <th scope="row">
                                                                    <input data-toggle="tooltip" data-placement="top" title="Shopify" type="text" name="paymentTypeShopify{{$index}}" class="form-control" ng-model="app.paymentTypeShopify">
                                                                </th>
                                                                <td>
                                                                    <input data-toggle="tooltip" data-placement="top" title="Millennium" type="text" name="paymentTypeMillenniun{{$index}}" class="form-control" ng-model="app.paymentTypeMillenniun">
                                                                </td>
                                                                <td ng-show="tenant.methodPayments.length >= 1">
                                                                    <button type="button" class="btn btn-outline-danger" ng-click="removeFromToPayment(app)">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                                                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path>
                                                                            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path>
                                                                        </svg>
                                                                    </button>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <div>
                                                        <button type="button" class="btn btn-success" ng-click="addFromToPayment()">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
                                                                <path d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z"></path>
                                                            </svg>
                                                            Adicionar
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="panel panel-default" ng-if="!readOnly">
                                            <div class="panel-heading">
                                                <h3 class="panel-title">Logins</h3>
                                            </div>
                                            <div class="panel-body">
                                                <div class="form-group row" ng-repeat="login in tenant.milleniumData.logins">
                                                    <label for="millenium_login{{$index}}" class="col-sm-1">Login</label>
                                                    <div class="col-sm-4">
                                                        <input type="text" name="millenium_login{{$index}}" class="form-control" ng-model="login.login" required>
                                                    </div>
                                                    <label for="millenium_password{{$index}}" class="col-sm-1">Password</label>
                                                    <div class="col-sm-4">
                                                        <input type="text" name="millenium_password{{$index}}" class="form-control" ng-model="login.password" required />
                                                    </div>
                                                    <div class="col-sm-1">
                                                        <button type="button" ng-click="removeMillenniumLogin(login)" ng-show="tenant.milleniumData.logins.length > 1">Remover</button>
                                                    </div>
                                                </div>
                                                <div class="col-sm-10">
                                                    <button type="button" ng-click="addMillenniumLogin()">Adicionar</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="tenant_tenantLogging" ng-model="tenant.tenantLogging">
                                            <label class="form-check-label" for="tenant_tenantLogging">
                                                Habilitar TennantLogging
                                            </label>
                                            <small class="form-text text-muted">
                                                Ao ativar está opçao haverá o logging de atividades.
                                            </small>
                                        </div>
                                         <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="milleniumData_enableProductDiscount" ng-model="tenant.milleniumData.enableProductDiscount">
                                            <label class="form-check-label" for="milleniumData_enableProductDiscount">
                                                Habilitar desconto por produto
                                            </label>
                                            <small class="form-text text-muted">
                                                Ao ativar está opção o desconto será aplicado no produto e não no pedido.
                                            </small>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="milleniumData_sendPaymentMethod" ng-model="tenant.milleniumData.sendPaymentMethod">
                                            <label class="form-check-label" for="milleniumData_sendPaymentMethod">
                                                Enviar método de pagamento
                                            </label>
                                            <small class="form-text text-muted">
                                                Essa informação precisa ser ativa sempre que o erro <bold>7</bold> ocorrer.
                                            </small>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="milleniumData_enableMaskedNSU" ng-model="tenant.milleniumData.enableMaskedNSU">
                                            <label class="form-check-label" for="milleniumData_enableMaskedNSU">
                                                Habilitar Mascara de NSU
                                            </label>
                                            <small class="form-text text-muted">
                                                Ao ativar está opção será adicionado zeros à esquerda até o limite de 9 caracteres.
                                            </small>
                                        </div>                                           
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="millenium_hasZeroedPriceCase" ng-model="tenant.milleniumData.hasZeroedPriceCase">
                                            <label class="form-check-label" for="millenium_hasZeroedPriceCase">
                                                Habilitar para caso haja preços zerado no de/para
                                            </label>
                                            <small class="form-text text-muted">
                                                Valida se o preço1 esta vazio ou zerado e considera o preço2
                                            </small>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="tenant_multiLocation" ng-model="tenant.multiLocation">
                                            <label class="form-check-label" for="tenant_multiLocation">
                                                Habilitar MultiLocation
                                            </label>
                                            <small class="form-text text-muted">
                                                Ao ativar está opçao será necessário configurar os IDs de estoque.
                                            </small>
                                        </div>
                                        <div class="panel panel-default" ng-show="tenant.multiLocation">
                                            <div class="panel-heading">
                                                <h3 class="panel-title">Multi Location</h3>
                                            </div>
                                            <div class="panel-body">
                                                <div class="form-group row" ng-repeat="location in tenant.locationMap.locations">
                                                    <label for="ecommerceLocation{{$index}}" class="col-md">Location {{tenant.integrationType || "Ecommerce" }}</label>
                                                    <div class="col-md-3">
                                                        <input type="text" name="ecommerceLocation{{$index}}" class="form-control" ng-model="location.ecommerceLocation" required>
                                                    </div>
                                                    <label for="erpLocation{{$index}}" class="col-md">Location {{tenant.type || "ERP" }}</label>
                                                    <div class="col-md-3">
                                                        <input type="text" name="erpLocation{{$index}}" class="form-control" ng-model="location.erpLocation" required />
                                                    </div>
                                                    <div class="col-sm">
                                                        <button type="button" ng-click="removeLocation(location)" ng-show="tenant.locationMap.locations.length > 1">Remover</button>
                                                    </div>
                                                </div>
                                                <div class="col-sm">
                                                    <button type="button" ng-click="addLocation()">Adicionar</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="tenant_transationApproved" ng-model="tenant.milleniumData.enabledApprovedTransaction">
                                            <label class="form-check-label" for="tenant_multiLocation">
                                                Habilitar aprovação de transação
                                            </label>
                                            <small class="form-text text-muted">
                                                Ao ativar está opção haverá o lançamento da aprovação das transações
                                            </small>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="millenium_enableSaveIntegrationInformations" ng-model="tenant.milleniumData.enableSaveIntegrationInformations">
                                            <label class="form-check-label" for="millenium_enableSaveIntegrationInformations">
                                                Salvar na base de dados as informações de integração.
                                            </label>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="millenium_enableSaveProcessIntegrations" ng-model="tenant.milleniumData.enableSaveProcessIntegrations">
                                            <label class="form-check-label" for="millenium_enableSaveProcessIntegrations">
                                                Salvar na base de dados as informações references ao processo automático de integração.
                                            </label>
                                        </div>
                                        <div class="form-check form-group">
                                            <input class="form-check-input" type="checkbox" id="millenium_enableExtraPaymentInformation" ng-model="tenant.milleniumData.enableExtraPaymentInformation" ng-click="setEnableExtraPaymentInformation()">
                                            <label class="form-check-label" for="millenium_enableExtraPaymentInformation">
                                                Habilitar informações extras de pagamento
                                            </label>
                                            <small class="form-text text-muted">
                                                (NSU, Autorizacao, Data Aprovação, Duplicata)
                                            </small>
                                        </div>

                                        <div class="form-group" id="divEnableExtraPaymentInformation" ng-show="tenant.milleniumData.enableExtraPaymentInformation">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">Informações extras de pagamento</h3>
                                                </div>
                                                <div class="panel-body">

                                                    <label for="millenium_urlextrapaymentinformation">Url do Api Gateway</label>
                                                    <input type="text" name="millenium_gateway" id="millenium_urlextrapaymentinformation" class="form-control" ng-model="tenant.milleniumData.urlExtraPaymentInformation" />
                                                    <small class="form-text text-muted">
                                                        Ex: <b>https://cielo.azurewebsites.net</b>
                                                    </small>
                                                    <br />
                                                    <label for="millenium_storedomaindydrasdag">Nome da loja cadastrado na Braspag</label>
                                                    <input type="text" name="millenium_url" id="millenium_storedomaindydrasdag" class="form-control" ng-model="tenant.milleniumData.storeDomainByBrasPag" />
                                                    <small class="form-text text-muted">
                                                        Deve respeitar o que está cadastrado na tabela ShopifyShop do banco Cielo
                                                    </small>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--Omie-->
                                    <div class="panel-body" ng-if="typeErp.IsOmie">
                                        <div class="form-group" ng-if="!readOnly">
                                            <label for="omie_appKey">AppKey da Loja</label>
                                            <input type="text" name="omie_appKey" class="form-control" ng-model="tenant.omieData.appKey" required />
                                        </div>
                                        <div class="form-group" ng-if="!readOnly">
                                            <label for="omie_appSecret">AppSecret da Loja</label>
                                            <input type="text" name="omie_appSecret" class="form-control" ng-model="tenant.omieData.appSecret" required />
                                        </div>
                                        <div class="form-group">
                                            <label for="omie_orderPrefix">Prefixo do Pedido</label>
                                            <input type="text" name="omie_orderPrefix" class="form-control" maxlength="2" ng-model="tenant.omieData.orderPrefix" />
                                            <small class="form-text text-muted">
                                                prefixo adicionado ao número do pedido ao enviar à omie. ex: <b>SP</b>
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <label>Nome Produto</label>
                                            <select class="custom-select" ng-model="tenant.omieData.nameField" required>
                                                <option value="descricao_familia">--Padrão (descricao_familia)--</option>
                                                <option value="descricao">descricao</option>
                                            </select>
                                            <small class="form-text text-muted">
                                                Indica o campo que será utilizado da Omie para Título do produto na Shopify
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-8">
                                                    Remover todos os caracteres após encontrar primeira sentença informada
                                                    <small class="form-text text-muted">
                                                        Ex: Camisa vermelha - 23GP -> Camisa vermelha
                                                    </small>
                                                </div>
                                                <div class="col-md-4">
                                                    <input type="text" name="omie_orderPrefix" class="form-control" maxlength="2" ng-model="tenant.omieData.normalizeProductName" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group" ng-show="editMode">
                                            <label for="omie_webhook">Webhook URL</label>
                                            <input type="text" name="omie_webhook" class="form-control" ng-value="config.webapi.url + '/webhook/omie/' + tenant.id" disabled="disabled" />
                                            <small class="form-text text-muted">
                                                url para configurar na omie como webhook. Configurar na Omie os seguintes eventos: produto.alterado, produto.excluido, produto.incluido, produto.movimentacaoestoque, vendaproduto.alterada, vendaproduto.cancelada, vendaproduto.devolvida, vendaproduto.etapaalterada, vendaproduto.faturada
                                            </small>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="omie_escapeBodyPipe" ng-model="tenant.omieData.escapeBodyPipe">
                                            <label class="form-check-label" for="omie_escapeBodyPipe">
                                                Transformar | em \n na descrição
                                            </label>
                                            <small class="form-text text-muted">
                                                Na descrição omie quebras de linha são transformadas em |, mas ao transformar | em \n perdemos as | de verdade se houver na descrição.
                                            </small>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="omie_appendSkuCode" ng-model="tenant.omieData.appendSkuCode">
                                            <label class="form-check-label" for="omie_appendSkuCode">
                                                inserir código do produto na sku
                                            </label>
                                            <small class="form-text text-muted">
                                                no campo sku da variante incluir no final o código texto cadastrado no produto omie
                                            </small>
                                        </div>
                                        <div class="form-group" ng-show="editMode">
                                            <label for="omie_codigoLocalEstoque">Local de Estoque</label>
                                            <select name="omie_codigoLocalEstoque" class="custom-select" ng-model="tenant.omieData.codigoLocalEstoque"
                                                    ng-options="option.codigo_local_estoque as option.codigo + ' - ' + option.descricao for option in omieLocaisEstoque">
                                                <option></option>
                                            </select>
                                        </div>
                                        <div class="form-group" ng-show="editMode">
                                            <label for="omie_codigoCategoria">Categoria</label>
                                            <select name="omie_codigoCategoria" class="custom-select" ng-model="tenant.omieData.codigoCategoria"
                                                    ng-options="option.codigo as option.descricao for option in omieCategorias">
                                                <option></option>
                                            </select>
                                        </div>
                                        <div class="form-group" ng-show="editMode">
                                            <label for="omie_codigoContaCorrente">Conta Corrente</label>
                                            <select name="omie_codigoContaCorrente" class="custom-select" ng-model="tenant.omieData.codigoContaCorrente"
                                                    ng-options="option.nCodCC as option.descricao for option in omieContasCorrente">
                                                <option></option>
                                            </select>
                                        </div>
                                        <div class="form-group" ng-show="editMode">
                                            <label for="omie_codigoCenarioImposto">Cenário Fiscal</label>
                                            <select name="omie_codigoCenarioImposto" class="custom-select" ng-model="tenant.omieData.codigoCenarioImposto"
                                                    ng-options="option.nCodigo as option.cNome for option in omieCenariosImposto">
                                                <option></option>
                                            </select>
                                        </div>
                                        <div class="form-group" ng-show="editMode">
                                            <label for="omie_codigoEtapaPaymentConfirmed">Etapa Omie para Pagamento Confirmado</label>
                                            <select name="omie_codigoEtapaPaymentConfirmed" class="custom-select" ng-model="tenant.omieData.codigoEtapaPaymentConfirmed"
                                                    ng-options="option.cCodigo as option.cDescricao for option in omieEtapasFaturamento">
                                                <option></option>
                                            </select>
                                        </div>
                                        <div class="form-group form-check">
                                            <input class="form-check-input" type="checkbox" id="omie_sendNotaFiscalEmailToClient" ng-model="tenant.omieData.sendNotaFiscalEmailToClient">
                                            <label class="form-check-label" for="omie_sendNotaFiscalEmailToClient">
                                                Enviar email de nota fiscal para o consumidor
                                            </label>
                                        </div>
                                        <div class="form-group">
                                            <label for="omie_extraNotaFiscalEmails">Emails extras para enviar a nota fiscal</label>
                                            <tags-input name="omie_extraNotaFiscalEmails" ng-model="tenant.omieData.extraNotaFiscalEmails" replace-spaces-with-dashes="false"></tags-input>
                                        </div>
                                        <div class="form-group">
                                            <label for="omie_variantCaracteristicas">Título das características de produto que serão usadas como Variantes no Shopify</label>
                                            <tags-input name="omie_variantCaracteristicas" ng-model="tenant.omieData.variantCaracteristicas" replace-spaces-with-dashes="false"></tags-input>
                                            <small class="form-text text-muted">
                                                Se o produto possuir mais que um valor precisa ter as características configuradas para serem as opções (cor, tamanho, etc...)
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <label for="omie_categoryCaracteristicas">Título das características de produto que serão usadas como Categorias no Shopify</label>
                                            <tags-input name="omie_categoryCaracteristicas" ng-model="tenant.omieData.categoryCaracteristicas" replace-spaces-with-dashes="false"></tags-input>
                                            <small class="form-text text-muted">
                                                O valor das características configuradas serão adicionadas como tags de categoria para o Shopify.
                                            </small>
                                            <small class="form-text text-muted">
                                                Para mais de uma categorias separar por ; os valores na característica (cat1;cat2)
                                            </small>
                                            <small class="form-text text-muted">
                                                Para hierarquia de categorias, colocar >> na característica (catpai>>catfilha)
                                            </small>
                                        </div>
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <h3 class="panel-title">Mapeamento Código Parcela</h3>
                                            </div>
                                            <div class="panel-body">
                                                <div class="form-check form-group">
                                                    <input class="form-check-input" type="checkbox" ng-click="checkParcelaUnica()" id="omie_parcelaUnica" ng-model="tenant.omieData.enableParcelaUnica">
                                                    <label class="form-check-label" for="omie_parcelaUnica">
                                                        Habilitar parcela única
                                                    </label>
                                                    <small class="form-text text-muted">
                                                        Ao ativar está opção, os pedidos serão enviados com o código de parcela e quantidade informados;
                                                    </small>
                                                </div>
                                                <div class="table-responsive-md form-group">
                                                    <table class="table table-bordered">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col">Número de parcelas</th>
                                                                <th scope="col">Condição Parcelamento</th>
                                                                <th scope="col">Qtde Dias P/ Pagamento</th>
                                                                <th scope="col">Ações</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="mapping in tenant.omieData.codigoParcelaMappings">
                                                                <th scope="row">
                                                                    <input data-toggle="tooltip" data-placement="top" title="Informe a quantidade de parcelas. Ex: 12" type="number" name="omie_quantidadeParcela{{$index}}" class="form-control" ng-model="mapping.quantidadeParcela" required />
                                                                </th>
                                                                <td>
                                                                    <select data-toggle="tooltip" data-placement="top" title="Condição parcelamento. Ex: A Vista" name="omie_codigoParcelaOmie{{$index}}" class="custom-select" ng-model="mapping.codigoParcelaOmie" required
                                                                            ng-options="option.codigo_parcela as option.descricao for option in omieCodigoParcelas">
                                                                        <option></option>
                                                                    </select>
                                                                </td>
                                                                <td>
                                                                    <input data-toggle="tooltip" data-placement="top" title="Quantiade de dias para pagamento da parcela (Opcional)" type="number" name="omie_qtdeDiasParaPagamento{{$index}}" class="form-control" ng-model="mapping.qtdeDiasParaPagamento" />
                                                                </td>
                                                                <td>
                                                                    <button type="button" class="btn btn-outline-danger" ng-click="removeOmieCodigoParcelaMapping(mapping)">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                                                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path>
                                                                            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path>
                                                                        </svg>
                                                                    </button>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <div>
                                                        <button type="button" class="btn btn-success" ng-click="addOmieCodigoParcelaMapping()">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
                                                                <path d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z"></path>
                                                            </svg>
                                                            Adicionar
                                                        </button>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="panel panel-default" ng-show="editMode">
                                            <div class="panel-heading">
                                                <h3 class="panel-title">Mapeamento Transportadoras</h3>
                                            </div>
                                            <div class="panel-body">
                                                <div class="table-responsive-md form-group">
                                                    <table class="table table-bordered">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col">Shopify</th>
                                                                <th scope="col">Omie</th>
                                                                <th scope="col">Ações</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="mapping in tenant.omieData.freteMappings">
                                                                <th scope="row">
                                                                    <input data-toggle="tooltip" data-placement="top" title="Nome do Serviço de Entrega Shopify" type="text" name="omie_shopifyCarrierTitle{{$index}}" class="form-control" ng-model="mapping.shopifyCarrierTitle" required />
                                                                </th>
                                                                <td>
                                                                    <select data-toggle="tooltip" data-placement="top" title="Transportadora Omie" name="omie_omieCodigoTransportadora{{$index}}" class="custom-select" ng-model="mapping.omieCodigoTransportadora" required
                                                                            ng-options="option.codigo_cliente as option.nome_fantasia for option in omieTransportadoras">
                                                                        <option></option>
                                                                    </select>
                                                                </td>
                                                                <td>
                                                                    <button type="button" class="btn btn-outline-danger" ng-click="removeOmieFreteMapping(mapping)">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                                                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path>
                                                                            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path>
                                                                        </svg>
                                                                    </button>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <div>
                                                        <button type="button" class="btn btn-success" ng-click="addOmieFreteMapping()">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
                                                                <path d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z"></path>
                                                            </svg>
                                                            Adicionar
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div ng-show="show.tools">
                            <!--Tools-->
                            <div class="tab-pane fade" id="tools" role="tabpanel" aria-labelledby="tools-tab" ng-show="editMode">
                                <div id="pnlTools">
                                    <!--Shopify-->
                                    <div class="panel panel-default" ng-show="tenant.integrationType == 'Shopify'">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">Shopify</h3>
                                        </div>
                                        <div class="panel-body">
                                            <form name="orderShopifyForm" class="no-gutters">
                                                <h6>Listar Pedido na Shopify para atualizar no {{tenantType}}</h6>
                                                <div class="input-group mb-3 col-sm-5">
                                                    <input type="text" class="form-control" ng-model="orderShopifyId" required placeholder="IDs de pedido Shopify separados por ';'">
                                                    <div class="input-group-append">
                                                        <loading-button class="btn btn-primary btn-outline-secondary" ng-click="postOrderShopify()" ng-model="btnOrderShopify"></loading-button>
                                                    </div>
                                                </div>
                                                <small class="form-text text-muted">
                                                    Ex: 00001;00002;00003
                                                </small>
                                                <br />
                                                <div class="input-group col-sm-5" ng-if="btnOrderShopify.isSuccess">
                                                    <div class="alert alert-primary" role="alert">
                                                        Sucesso
                                                    </div>
                                                </div>
                                            </form>

                                            @*<form name="orderShopifyFilterDateForm" class="no-gutters">
                                                <h6>Listar intervalo de pedidos na Shopify para atualizar no {{tenantType}}</h6>

                                                <input type="datetime-local" class="form-control" ng-model="dateMin" required>
                                                <input type="datetime-local" class="form-control" ng-model="dateMax" required>
                                                <br />
                                                <div class="">
                                                <loading-button class="btn btn-primary btn-outline-secondary" ng-click="postShopifyFilterDate()" ng-model="btnOrderShopifyFilterDate"></loading-button>
                                                </div>

                                                <div class="input-group col-sm-5" ng-if="btnOrderShopifyFilterDate.isSuccess">
                                                <div class="alert alert-primary" role="alert">
                                                Sucesso
                                                </div>
                                                </div>
                                                </form>*@
                                            <form name="allCollectionsShopifyForm" class="no-gutters">
                                                <h6>Atualizar <b>todas as collections</b> no Shopify</h6>
                                                <div class="input-group mb-3 col-sm-5">
                                                    <loading-button class="btn btn-primary btn-outline-secondary btn-block" ng-click="postAllCollectionsShopify()" ng-model="btnAllCollectionsShopify"></loading-button>
                                                </div>
                                                <div class="input-group col-sm-5" ng-if="btnAllCollectionsShopify.isSuccess">
                                                    <div class="alert alert-primary" role="alert">
                                                        Sucesso
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                    <!--Millenium-->
                                    <div class="panel panel-default" ng-show="tenantType == 'Millennium'">
                                        <div class="panel-heading" style="display: flex; justify-content: space-between;">
                                            <h3 class="panel-title">Millennium</h3>
                                            <small>Session: <span>{{tenant.milleniumData.sessionToken}}</span></small>
                                        </div>
                                        <div class="panel-body">
                                            <div class="input-group mb-3 col-sm-12 paddingZero">
                                                <div class="col-sm-6 paddingZero">
                                                    <form name="orderMillenniumForm" class="no-gutters">
                                                        <h6>Listar Pedido na Millennium para atualizar Shopify</h6>
                                                        <div class="input-group mb-3 col-sm-10">
                                                            <input type="text" class="form-control" ng-model="orderMillenniumId" required placeholder="IDs de pedido Millenium separados por ';'">
                                                            <div class="input-group-append">
                                                                <loading-button class="btn btn-primary btn-outline-secondary" ng-click="postOrderMillennium()" ng-model="btnOrderMillennium"></loading-button>
                                                            </div>
                                                        </div>
                                                        <small class="form-text text-muted">
                                                            Ex: 00001;00002;00003 | Id Externo
                                                        </small>
                                                        <br />
                                                        <div class="input-group col-sm-10" ng-if="btnOrderMillennium.isSuccess">
                                                            <div class="alert alert-primary" role="alert">
                                                                Sucesso
                                                            </div>
                                                        </div>
                                                    </form>
                                                    <form name="productMillenniumForm" class="no-gutters">
                                                        <h6>Listar Produto na Millennium para atualizar Shopify</h6>
                                                        <div class="input-group mb-3 col-sm-10">
                                                            <input type="text" class="form-control" ng-model="productMillenniumId" required placeholder="ID do produto Millenium (long)">
                                                            <div class="input-group-append">
                                                                <loading-button class="btn btn-primary btn-outline-secondary" ng-click="postProductMillennium()" ng-model="btnProductMillennium"></loading-button>
                                                            </div>
                                                        </div>
                                                        <div class="input-group col-sm-10" ng-if="btnProductMillennium.isSuccess">
                                                            <div class="alert alert-primary" role="alert">
                                                                Sucesso
                                                            </div>
                                                        </div>
                                                    </form>
                                                    <form name="allProductsMillenniumForm" class="no-gutters">
                                                        <div class="input-group mb-3 col-sm-10 paddingZero ">
                                                            <div class="mb-3 col-sm-12 paddingZero ">
                                                                <h6>Listar <b>produtos</b> na Millennium para atualizar Shopify</h6>
                                                            </div>
                                                            <div class="mb-3 col-sm-12 paddingZero ">
                                                                <input type="date" class="form-control" ng-model="dateUpdate" required>
                                                                <small class="form-text text-muted">Escolha uma data para fazer a atualização de produtos</small>
                                                            </div>

                                                            <div class="input-group mb-3 col-sm-12 paddingZero ">
                                                                <loading-button class="btn btn-primary btn-outline-secondary btn-block" ng-click="postAllProductsMillennium()" ng-model="btnAllProductsMillennium"></loading-button>
                                                            </div>
                                                            <div class="input-group col-sm-12 paddingZero " ng-if="btnAllProductsMillennium.isSuccess">
                                                                <div class="alert alert-primary" role="alert">
                                                                    Sucesso
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                                <div class="col-sm-6 paddingZero">
                                                    <div class="regionTransId" ng-show="tenantType == 'Millennium'">
                                                        <div class="regionTitle">
                                                            Produto:
                                                        </div>

                                                        <div>TransId: <input type="text" ng-model="tenant.milleniumData.transIdProd" readonly /></div>
                                                        <div>
                                                            Data Atualização: <input type="text" ng-model="tenant.milleniumData.upadateDateProd" readonly />
                                                        </div>
                                                    </div>
                                                    <div class="regionTransId" ng-show="tenantType == 'Millennium'">
                                                        <div class="regionTitle">
                                                            Preço:
                                                        </div>

                                                        <div>TransId: <input type="text" ng-model="tenant.milleniumData.transIdPrice" readonly /></div>
                                                        <div>
                                                            Data Atualização: <input type="text" ng-model="tenant.milleniumData.upadateDatePrice" readonly />
                                                        </div>
                                                    </div>
                                                    <div class="regionTransId" ng-show="tenantType == 'Millennium'">
                                                        <div class="regionTitle">
                                                            Estoque:
                                                        </div>

                                                        <div>TransId: <input type="text" ng-model="tenant.milleniumData.transIdStock" readonly /></div>
                                                        <div>
                                                            Data Atualização: <input type="text" ng-model="tenant.milleniumData.upadateDateStock" readonly />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--Omie-->
                                    <div class="panel panel-default" ng-show="tenantType == 'Omie'">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">Omie</h3>
                                        </div>
                                        <div class="panel-body">
                                            <form name="orderOmieForm" class="no-gutters">
                                                <h6>Listar Pedido na Omie para atualizar Shopify</h6>
                                                <div class="input-group mb-3 col-sm-5">
                                                    <input type="text" class="form-control" ng-model="orderOmieId" required placeholder="ID externo do pedido Omie (string)">
                                                    <div class="input-group-append">
                                                        <loading-button class="btn btn-primary btn-outline-secondary" ng-click="postOrderOmie()" ng-model="btnOrderOmie"></loading-button>
                                                    </div>
                                                </div>
                                                <div class="input-group col-sm-5" ng-if="btnOrderOmie.isSuccess">
                                                    <div class="alert alert-primary" role="alert">
                                                        Sucesso
                                                    </div>
                                                </div>
                                            </form>
                                            <form name="productOmieForm" class="no-gutters">
                                                <h6>Listar Produto Pai na Omie para atualizar Shopify</h6>
                                                <div class="input-group mb-3 col-sm-5">
                                                    <input type="text" class="form-control" ng-model="productOmieId" required placeholder="ID da família de produto Omie (long)">
                                                    <div class="input-group-append">
                                                        <loading-button class="btn btn-primary btn-outline-secondary" ng-click="postProductOmie()" ng-model="btnProductOmie"></loading-button>
                                                    </div>
                                                </div>
                                                <div class="input-group col-sm-5" ng-if="btnProductOmie.isSuccess">
                                                    <div class="alert alert-primary" role="alert">
                                                        Sucesso
                                                    </div>
                                                </div>
                                            </form>
                                            <form name="allProductsOmieForm" class="no-gutters">
                                                <h6>Listar <b>todos os produtos</b> na Omie para atualizar Shopify</h6>
                                                <div class="input-group mb-3 col-sm-5">
                                                    <loading-button class="btn btn-primary btn-outline-secondary btn-block" ng-click="postAllProductsOmie()" ng-model="btnAllProductsOmie"></loading-button>
                                                </div>
                                                <div class="input-group col-sm-5" ng-if="btnAllProductsOmie.isSuccess">
                                                    <div class="alert alert-primary" role="alert">
                                                        Sucesso
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">Filas</h3>
                                        </div>
                                        <div class="panel-body">
                                            <form name="queuesForm" class="no-gutters">
                                                <h6>Carregar quantidade de mensagens por fila</h6>
                                                <div class="input-group mb-3 col-sm-5">
                                                    <loading-button class="btn btn-primary btn-outline-secondary btn-block" ng-click="getQueuesCount()" ng-model="btnQueuesCount"></loading-button>
                                                </div>
                                            </form>

                                            <div class="container" ng-show="queuesCount.length > 0">
                                                <div class="row">
                                                    <div class="col-sm-4 border">
                                                        Fila
                                                    </div>
                                                    <div class="col-sm-2 border">
                                                        Qtd Ativo
                                                    </div>
                                                    <div class="col-sm-2 border">
                                                        Qtd Erro
                                                    </div>
                                                    <div class="col-sm-2 border">
                                                        Qtd Scheduled
                                                    </div>
                                                </div>
                                                <div class="row" ng-repeat="queue in queuesCount">
                                                    <div class="col-sm-4 border">
                                                        {{queue.queueName}}
                                                    </div>
                                                    <div class="col-sm-2 border">
                                                        {{queue.messageCount}}
                                                    </div>
                                                    <div class="col-sm-2 border">
                                                        {{queue.deadLetterMessageCount}}
                                                    </div>
                                                    <div class="col-sm-2 border">
                                                        {{queue.scheduledMessageCount}}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>
    </div>
</div>
@section Scripts {
<script src="~/js/tenantController.js" asp-append-version="true"></script>
}